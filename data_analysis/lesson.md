# もっとユーザーについて知るためのデータ分析入門: レッスン
## はじめに
### インストラクター紹介
- https://github.com/plaidev/karte-school/tree/master/_instructors

### 参加者自己紹介
- 企業名
- お名前
- 職種
    - ご自身がKARTEでどんなことをしているか
- 受講を決めたきっかけや理由

### このコースのゴール
- データベースのデータを使って、自分が知りたい情報を集計して抜き出すことができるようになる
- それを通じて、主に「SQL」によってできることを知る

### このコースの特徴
- このコースは、非エンジニアの方の受講を想定したものです
- SQLについては、細かい文法解説よりも、「SQLを書くと何ができるか」を体感することを重視しています

### 事前課題の確認
- https://github.com/plaidev/karte-school/blob/master/widget/beginner/pre_homework.md

## 「もっとユーザーについて知る」ために、なぜデータ分析スキルが必要か？
- KARTEの機能を使っても、決まった切り口であれば、かなりユーザーについて知ることができます
    - ユーザー詳細画面
        - 特定のユーザーが過去にどんな行動をしていたか？
    - セグメント機能
        - ユーザーデータ（過去に発生したイベントの統計値）が、ある条件に合致しているかどうか？
    - 接客サービス詳細画面
        - 特定の接客サービスに対してユーザーがどんな反応をするか？
    - ベーシックレポート
        - よく使われる軸で分析した結果のダッシュボード
- しかし、たとえば下記のようにより進んだ分析をする場合、独自にデータを集計する必要があります
    - 「ページA -> B -> C」の順番でページ遷移したユーザーを抽出したい
    - CVしたユーザーがその直前によく見ているページ群を抽出したい
    - 特定の接客サービスをクリックしたユーザーとしていないユーザーで、その10〜20日後のアクセス頻度を比較したい
- 自分の関心のある軸でユーザーを探したり、ユーザー行動の傾向を掴んだりしたい場合、SQLを中心とするデータ分析スキルが必要になる

## Webサイトやネイティブアプリのユーザーを知るために使われるデータ
- Webサイトやネイティブアプリのユーザーを知るためには、ユーザーの行動ログ（イベントデータ、アクセスログ）が主に利用されています
    - 「Aさんのアクセス頻度が急に上がったので、サイトを好きになってくれたのかもしれない」
    - 「Aさんは猫好きの人がよく見るページを見ているので、同様に猫が好きかもしれない」
    - 「Aさんは毎月15日頃になると商品をよく購入するので、Aさんの給料日は15日かもしれない」
- また、ユーザーの属性情報が取得できている場合、行動ログに含まれるuser_idを使って名寄せすることで、行動ログと属性情報を合わせて分析することもできます。
- このコースでは、「事前準備」で使用した下記のサンプルデータを用いて、データ分析を体験します

csvファイル名 | 概要
-- | --
`access_logs.csv` | Webのアクセスログ
`users.csv` | ユーザーの属性情報

## まずはGoogleスプレッドシートでやってみる
- Webのアクセスログ自体に慣れるために、まずはGoogleスプレッドシートを使ってサンプルデータを集計してみます
- 事前準備で用意したGoogleスプレッドシートを開いてください

### ワーク: アクセスログの全体集計値を出してみる
- Googleスプレッドシートの`access_logs`にあるデータを使って、下記のデータを集計してみましょう（期間は全期間）
    1. ページビュー(PV)数
    2. セッション数
    3. ユニークユーザー(UU)数
    4. セッション毎の平均PV数
    5. ユーザー毎の平均PV数
    6. ユーザー毎の平均セッション数
- ヒント
    - 元のデータを壊さないために、新しくシートを追加し、そこに結果を表示しましょう
    - ユニークな数を集計するために、スプレッドシートには`=COUNTUNIQUE()`という便利な関数が用意されています
- 追加の演習
    - pathも`=COUNTUNIQUE()`でCOUNTしてみましょう。その数にはどんな意味があるでしょうか？

### ワーク: アクセスログのユーザー毎の集計
- Googleスプレッドシートの`access_logs`にあるデータを使って、下記のデータを集計してみましょう（期間は全期間）
    1. ユーザー毎のPV数
    2. ユーザー毎のセッション数
- ヒント
    - ピボットテーブルを使うのは、1つの方法です
        - [データ > ピボットテーブル]
- 追加の演習
    - PV数が20以上のユーザーのuser_idの一覧を特定してみましょう
    - ユーザー毎のセッション数は、最大でいくつでしょうか？

### ワーク: アクセスログの性別毎の集計
- Googleスプレッドシートの`access_logs`と`users`にあるデータを組み合わせて、下記のデータを集計してみましょう（期間は全期間）
    1. 性別毎のPV数
    2. 性別毎のセッション数
    3. 性別毎のUU数
- ヒント
    - `access_logs`に`gender`列を追加し、`=VLOOKUP()`関数で`users`の値を
    - あとは、一つ前のワークと同様です
- 追加の演習
    - 年齢毎のPV数、セッション数、UU数も同様に集計してみましょう





TODO: 最終的にどんなクエリが書けるようになるかを、最初に提示する